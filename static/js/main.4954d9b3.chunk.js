(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,c){},133:function(e,t,c){},136:function(e,t){},142:function(e,t){},159:function(e,t){},161:function(e,t){},179:function(e,t){},191:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c.n(a),n=c(95),r=c.n(n),i=(c(105),c(6)),l=c(2),o=c.n(l),d=c(5),j=c(96),b=c(97),h=c(100),u=c(99),m=c(3),x=c(4),p=(c(62),c(122),c(132),c(133),c(34)),O=c(18),v=c(0);function f(){return Object(v.jsx)("div",{className:"d-flex justify-content-center",children:Object(v.jsx)("div",{className:"spinner-grow",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},"1")}var g=function(e){return e||null},N=function(e){return e||null},y=c(9);var w=function(e){var t=Object(a.useState)(""),c=Object(O.a)(t,2),s=c[0],n=c[1];function r(){return(r=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.location.href="#/contract/"+s;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var i=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g,t.next=3,e._near.contract.get_contract({contract_hash:c.length<=1?void 0:c[1]});case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=Object(y.a)(s?["contract",s]:null,i,{errorRetryInterval:500}).data;return Object(v.jsxs)("div",{className:"container my-auto",children:[Object(v.jsx)("div",{style:{margin:"5%"}}),Object(v.jsx)("h4",{className:"mb-5 text-center",children:"Welcome to contracts.one!"}),Object(v.jsx)("h5",{className:"text-center",children:"The decentralized source of truth for NEAR contracts"}),Object(v.jsx)("div",{style:{margin:"10%"}}),Object(v.jsx)("form",{onSubmit:function(e){return function(e){return r.apply(this,arguments)}(e)},children:Object(v.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(v.jsxs)("div",{className:"form-group",style:{width:"600px",margin:"25px"},children:[Object(v.jsx)("label",{className:"mt-3",children:"Put here contract hash or certificate id"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: 55E7imniT2uuYrECn17qJAk9fLcwQW4ftNSwmCJL5Di",onChange:function(e){return n(e.target.value)}}),Object(v.jsxs)("small",{className:"gray",children:["try ",Object(v.jsx)("samp",{className:"small",children:"5suuACmAzbTj8oyv4bQUjuJZbRinGMAKMLorDDEFzu4a"})]}),Object(v.jsx)("div",{style:{margin:"10%"}}),Object(v.jsx)("div",{className:"d-flex justify-content-center",children:Object(v.jsx)("button",{className:"btn-lg btn btn-outline-primary "+(l?"":"disabled"),children:"Go!"})})]})})})]})};function _(e){var t=e.contractHash,c=e.version;return Object(v.jsx)(m.b,{className:"navigate",to:"/contract/"+t,children:c})}function k(e){var t=e.projectName;return Object(v.jsx)(m.b,{className:"navigate",to:"/projectInfo/"+t,children:t})}function C(e){var t=e.userName;return Object(v.jsx)(m.b,{className:"navigate",to:"/profileStats/"+t,children:t})}function I(e){var t,c=e.data,a=(t=c)?{projectName:t.project_name,version:t.version,author:t.author,reportUrl:t.report_url,summary:t.summary,standardsConfirmed:t.standards_confirmed,basicValidityPassed:t.basic_validity_passed,contractApproved:t.contract_approved,score:t.score}:null,s=a.standardsConfirmed.map((function(e,t){return Object(v.jsx)("div",{className:"badge bg-success mx-1",children:e},t)}));return Object(v.jsx)("div",{className:"card mb-3 bg-gray",style:{width:"100%"},children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"d-flex flex-row",children:[Object(v.jsxs)("h5",{className:"card-title pe-3",children:["Certificated ",Object(v.jsx)(k,{projectName:a.projectName})]}),Object(v.jsxs)("div",{className:"card-title gray pe-3",children:["version ",a.version]}),Object(v.jsxs)("div",{className:"card-title gray pe-3",children:["by ",Object(v.jsx)(C,{userName:a.author})]}),Object(v.jsx)("div",{className:"me-auto card-title",children:s}),Object(v.jsxs)("big",{className:"pe-3 card-title",children:[Object(v.jsx)("small",{className:"gray",children:"score:"})," ",a.score]}),Object(v.jsxs)("big",{className:"pe-3 card-title",children:[Object(v.jsx)("small",{className:"gray",children:"basic validity:"})," ",a.basicValidityPassed?"passed":"failed"]}),Object(v.jsxs)("big",{className:"card-title",children:[Object(v.jsx)("small",{className:"gray",children:"audit verdict:"})," ",a.contractApproved?"approved":"refused"]})]}),Object(v.jsxs)("div",{className:"d-flex flex-row card-text",children:[Object(v.jsx)("div",{className:"w-75",children:Object(v.jsx)("div",{className:"card-text gray",children:a.summary})}),Object(v.jsx)("div",{className:"ms-auto",children:Object(v.jsx)("a",{href:"//"+a.reportUrl,className:"btn btn-secondary",children:"Go to report"})})]})]})})}var S=function(e){var t=Object(x.f)().page;void 0===t&&(t=0);var c=25*Math.max(0,t-1),s=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._near.contract.get_all_certificates({from:c.length<=1?void 0:c[1],to:(c.length<=1?void 0:c[1])+25});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=Object(y.a)(["all_certificates",c],s,{errorRetryInterval:500}).data,r=n&&n.map((function(t,c){return Object(a.createElement)(I,Object(i.a)(Object(i.a)({},e),{},{key:c,data:t}))}));return n?Object(v.jsxs)("div",{className:"pb-3",children:[Object(v.jsx)("div",{className:"container g-0 px-5",children:Object(v.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3",children:[Object(v.jsx)("h4",{className:"py-2 bd-highlight",children:"All Certificates"}),Object(v.jsx)("div",{className:"ms-auto bd-highlight"}),Object(v.jsx)(m.b,{className:"btn btn-outline-secondary "+(e.signedIn?"":"disabled"),to:"/profileAudits/"+e.signedAccountId,children:"Submit new audit"}),Object(v.jsx)("div",{className:"px-2 bd-highlight"}),Object(v.jsx)(m.b,{className:"btn btn-outline-secondary "+(e.signedIn?"":"disabled"),to:"/profileAudits/"+e.signedAccountId,children:"My audits"}),Object(v.jsx)("div",{className:"px-2 bd-highlight"}),Object(v.jsx)(m.b,{className:"btn btn-outline-primary disabled "+(e.signedIn?"":"disabled"),to:"/profileAudits/"+e.signedAccountId,children:"Request an audit"})]})}),Object(v.jsx)("div",{className:"container g-0 px-5",children:Object(v.jsx)("div",{className:"mb-3 py-2",children:r})})]}):f()},A=c(44),P=c.n(A);var E=function(e){var t=Object(x.f)().contractHash,c=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=N,t.next=3,e._near.contract.get_project({project_name:c.length<=1?void 0:c[1]});case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(c.length<=1?void 0:c[1])){t.next=4;break}t.t0=g(null),t.next=9;break;case 4:return t.t1=g,t.next=7,e._near.contract.get_contract({contract_hash:c.length<=1?void 0:c[1]});case 7:t.t2=t.sent,t.t0=(0,t.t1)(t.t2);case 9:return t.abrupt("return",t.t0);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(c.length<=1?void 0:c[1])){t.next=4;break}t.t0=null,t.next=7;break;case 4:return t.next=6,e._near.contract.get_contract_safety_report({contract_hash:c.length<=1?void 0:c[1]});case 6:t.t0=t.sent;case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=Object(y.a)(t?["contract",t]:null,a,{errorRetryInterval:500}).data,r=Object(y.a)(n?["project",n.project_name]:null,c,{errorRetryInterval:500}).data,i=Object(y.a)(t?["contract_safety",t]:null,s,{errorRetryInterval:500}).data,l=n&&n.certificates.length?n.certificates.map((function(e,t){var c=e.approved?"approved":"refused";return Object(v.jsx)("div",{className:"container g-0",children:Object(v.jsxs)("div",{children:[c," by ",Object(v.jsx)(m.b,{to:"/profileAudits/".concat(e.author),children:e.author})]})},t)})):Object(v.jsx)("div",{children:"No certificates found"}),j=new Map;n&&n.standards_declared.forEach((function(e){j.set(e,0)})),n&&n.certificates.forEach((function(e){e.standards_confirmed.forEach((function(e){j.set(e,(j.get(e)||0)+1)}))}));var b,h=j.size?Array.from(j).map((function(e,t){var c=e[1]>0?"bg-success":"bg-secondary";return Object(v.jsx)("div",{className:"container g-0 pt-2",children:Object(v.jsx)("div",{className:"d-flex flex-row",children:Object(v.jsxs)("div",{className:"px-2 badge "+c,children:[e[0],Object(v.jsxs)("small",{className:"ps-2",children:["x",e[1]]})]})})},t)})):Object(v.jsx)("div",{children:"No standards confirmed"}),u=i&&("High"===i.safety_level?"btn-outline-success":"Moderate"===i.safety_level?"btn-outline-warning":"btn-outline-danger");return e.connected&&n&&r?Object(v.jsx)("div",{className:"pb-3",children:Object(v.jsxs)("div",{className:"container g-0 px-5",children:[Object(v.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3",children:[Object(v.jsx)("div",{className:"py-2 bd-highlight",children:Object(v.jsx)("h5",{children:"Contract"})}),Object(v.jsx)("div",{className:"p-2 bd-highlight"}),Object(v.jsx)("div",{className:"p-2 bd-highlight",children:Object(v.jsx)("h5",{className:"gray",children:n.hash})}),Object(v.jsx)("div",{className:"px-5 bd-highlight"}),Object(v.jsx)("div",{className:"bd-highlight",children:Object(v.jsx)("h5",{className:"btn-lg btn-outline disabled",children:"Safety level"})}),Object(v.jsx)("div",{className:"bd-highlight",children:Object(v.jsx)("div",{className:"btn btn-lg disabled "+u,children:i&&i.safety_level})}),Object(v.jsx)("div",{className:"p-2 bd-highlight"}),Object(v.jsx)("div",{className:"bd-highlight",children:Object(v.jsx)("div",{className:"small",children:i&&i.safety_explanation})})]}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Project"}),Object(v.jsx)(m.b,{to:"/projectInfo/".concat(n.project_name),children:n.project_name})]}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Description"}),Object(v.jsx)("div",{children:r.description})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Contract details"}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",style:{minWidth:"200px"},children:"Contract name:"}),Object(v.jsx)("div",{className:"col-4",style:{minWidth:"200px"},children:n.contract_name})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",style:{minWidth:"200px"},children:"Version:"}),Object(v.jsx)("div",{className:"col-4",style:{minWidth:"200px"},children:n.version})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",style:{minWidth:"200px"},children:"Publisher:"}),Object(v.jsx)("div",{className:"col-4",style:{minWidth:"200px"},children:n.publisher})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",style:{minWidth:"200px"},children:"Published time:"}),Object(v.jsx)("div",{className:"col-4",style:{minWidth:"200px"},children:Object(v.jsx)(P.a,{unix:!0,fromNow:!0,children:n.published_time/1e9})})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",style:{minWidth:"200px"},children:"Hash:"}),Object(v.jsx)("div",{className:"col-4",style:{minWidth:"200px"},children:Object(v.jsx)("samp",{className:"small",children:n.hash})})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",style:{minWidth:"200px"},children:"Audit status:"}),Object(v.jsx)("div",{className:"col-4",style:{minWidth:"200px"},children:Object(v.jsx)("div",{className:"d-flex flex-row",children:Object(v.jsx)("div",{className:"mt-1 me-2 badge bg-success "+(b=n.audit_status,"Audited"===b?"bg-success":"bg-danger"),children:n.audit_status})})})]}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-2",style:{minWidth:"200px"},children:"Source code:"}),Object(v.jsxs)("div",{className:"col-4",style:{minWidth:"200px"},children:[n.source_code_size," bytes ",Object(v.jsx)(m.b,{to:"#",children:"(download)"})]})]})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Standards"}),Object(v.jsx)("div",{children:h})]}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Certificates"}),Object(v.jsx)("div",{children:l})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"small",children:[Object(v.jsx)("div",{className:"pb-2",children:"Reporting of basic contract validity"}),Object(v.jsx)("div",{className:"gray",children:"To check basic contract validity, you asked to download and compile the source code from the link above."}),Object(v.jsxs)("div",{className:"gray",children:["Please use ",Object(v.jsx)(m.b,{to:"/rules",children:"Contracts One CLI Developer Tools"})," or do it manually as the following."]}),Object(v.jsx)("div",{className:"gray pb-1",children:"To compile the source code, run the following lines in the terminal:"}),Object(v.jsxs)("div",{className:"small px-2 py-1 bg-gray",children:[Object(v.jsx)("div",{children:Object(v.jsx)("samp",{className:"mt-5",children:"RUSTFLAGS='-C link-arg=-s' cargo +nightly build --target wasm32-unknown-unknown --release"})}),Object(v.jsx)("div",{children:Object(v.jsx)("samp",{className:"mt-5",children:"cd target/wasm32-unknown-unknown/release && near dev-deploy contracts_one.wasm"})})]}),Object(v.jsxs)("div",{className:"gray pt-2 pb-2",children:["Grab your freshly generated ",Object(v.jsx)("samp",{children:"dev-*"})," account from stdout and execute the following:"]}),Object(v.jsx)("div",{className:"small px-2 py-1 bg-gray",children:Object(v.jsx)("div",{children:Object(v.jsx)("samp",{className:"mt-5",children:"near state [dev-account] --networkId=testnet --nodeUrl=https://rpc.testnet.near.org"})})}),Object(v.jsxs)("div",{className:"gray pt-2",children:["Check that ",Object(v.jsx)("samp",{className:"small",children:"code_hash"})," is equal to ",Object(v.jsx)("samp",{className:"small",children:n.hash}),"."]}),Object(v.jsxs)("div",{className:"gray pt-2",children:["Go to the ",Object(v.jsx)(m.b,{to:"/rules",children:"Basic Contract Validity Guide"})," for more details."]})]}),!1]})}):f()};function R(e){var t,c=e.data,a=(t=c)?{auditStatus:t.audit_status,description:t.description,id:t.project_id,lastVersion:t.last_version,lastVersionContractHash:t.last_version_contract_hash,name:t.project_name,publisher:t.publisher,numContracts:t.num_contracts}:null,s=a.numContracts>0;return Object(v.jsx)("div",{className:"card mb-3 bg-gray",style:{width:"100%"},children:Object(v.jsxs)("div",{className:"card-body",children:[Object(v.jsxs)("div",{className:"card-title d-flex flex-row",children:[Object(v.jsxs)("h5",{className:"pe-3",children:["Project ",Object(v.jsx)(k,{projectName:a.name})]}),Object(v.jsxs)("div",{className:"gray pe-3",children:[Object(v.jsx)("big",{children:a.numContracts})," contract(s)"]}),s&&Object(v.jsxs)("div",{className:"gray pe-3",children:["last version ",Object(v.jsx)(_,{contractHash:a.lastVersionContractHash,version:a.lastVersion})]}),s&&Object(v.jsxs)("div",{className:"gray",children:["by ",Object(v.jsx)(C,{userName:a.publisher})]}),Object(v.jsx)("div",{className:"ms-auto badge bg-success mt-1 mb-2",children:a.auditStatus})]}),Object(v.jsxs)("div",{className:"d-flex flex-row card-text",children:[Object(v.jsx)("div",{className:"flex-grow-1 d-flex flex-row",children:Object(v.jsx)("div",{className:"card-text gray",children:a.description})}),s&&Object(v.jsx)("div",{className:"ms-3 align-bottom ",children:Object(v.jsx)(m.b,{to:"/contract/"+a.lastVersionContractHash,className:"btn btn-secondary",children:"Last deployed contract"})}),Object(v.jsx)("div",{className:"ms-3 align-bottom ",children:Object(v.jsx)(m.b,{to:"/projectInfo/"+a.name,className:"btn btn-secondary",children:"Project details"})})]})]})})}var W=function(e){var t=Object(x.f)().page;void 0===t&&(t=0);var c=25*Math.max(0,t-1),s=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._near.contract.get_all_projects({from:c.length<=1?void 0:c[1],to:(c.length<=1?void 0:c[1])+25});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=Object(y.a)(["all_projects",c],s,{errorRetryInterval:500}).data,r=n&&n.map((function(t,c){return Object(a.createElement)(R,Object(i.a)(Object(i.a)({},e),{},{key:c,data:t}))}));return n?Object(v.jsxs)("div",{className:"pb-3",children:[Object(v.jsx)("div",{className:"container g-0 px-5",children:Object(v.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3",children:[Object(v.jsx)("h4",{className:"py-2 bd-highlight",children:"All Projects"}),Object(v.jsx)("div",{className:"ms-auto bd-highlight"}),Object(v.jsx)(m.b,{className:"btn btn-outline-secondary "+(e.signedIn?"":"disabled"),to:"/profileProjects/"+e.signedAccountId,children:"Create new project"}),Object(v.jsx)("div",{className:"px-2 bd-highlight"}),Object(v.jsx)(m.b,{className:"btn btn-outline-secondary "+(e.signedIn?"":"disabled"),to:"/profileProjects/"+e.signedAccountId,children:"My projects"})]})}),Object(v.jsx)("div",{className:"container g-0 px-5",children:Object(v.jsx)("div",{className:"mb-3 py-2",children:r})})]}):f()};var D=function(e){var t=Object(x.f)().projectName,c=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=N,t.next=3,e._near.contract.get_project({project_name:c.length<=1?void 0:c[1]});case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=Object(y.a)(["project",t],c,{errorRetryInterval:500}).data,s=a&&a.owners.map((function(e,t){return Object(v.jsx)("div",{className:"container g-0",children:Object(v.jsx)("div",{children:Object(v.jsx)(m.b,{to:"/profileProjects/".concat(e),children:e})})},t)})),n=a&&a.contracts.map((function(e,t){return Object(v.jsx)("div",{className:"container g-0",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-1",children:Object(v.jsx)(m.b,{to:"/contract/".concat(e.hash),children:e.version})}),Object(v.jsx)("div",{className:"col-4",children:Object(v.jsx)("samp",{className:"small",children:Object(v.jsx)(m.b,{to:"/contract/".concat(e.hash),children:e.hash})})}),Object(v.jsxs)("div",{className:"col-7",children:["Published ",Object(v.jsx)(P.a,{unix:!0,fromNow:!0,children:e.published_time/1e9})," by ",Object(v.jsx)(m.b,{to:"/profileProjects/".concat(e.publisher),children:e.publisher})]})]},t)},t)}));return e.connected&&a?Object(v.jsx)("div",{className:"pb-3",children:Object(v.jsxs)("div",{className:"container g-0 px-5",children:[Object(v.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3",children:[Object(v.jsx)("div",{className:"py-2 bd-highlight",children:Object(v.jsx)("h5",{children:"Project"})}),Object(v.jsx)("div",{className:"p-2 bd-highlight"}),Object(v.jsx)("div",{className:"p-2 bd-highlight",children:Object(v.jsx)("h5",{className:"gray",children:a.project_name})})]}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Description"}),Object(v.jsx)("div",{children:a.description})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Known versions"}),Object(v.jsx)("div",{children:n})]}),Object(v.jsx)("hr",{}),Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Owners"}),Object(v.jsx)("div",{children:s})]})]})}):f()},L="stats",T="projects",M="audits";function q(e,t){var c=Object(x.f)().profileId,s=Object(a.useState)(!0),n=Object(O.a)(s,2),r=n[0],l=n[1],j=Object(a.useState)(""),b=Object(O.a)(j,2),h=b[0],u=b[1],p=Object(a.useState)(""),N=Object(O.a)(p,2),w=N[0],_=N[1],k=Object(a.useState)(""),C=Object(O.a)(k,2),S=C[0],A=C[1],P=Object(a.useState)(""),E=Object(O.a)(P,2),W=E[0],D=E[1],q=Object(a.useState)(""),U=Object(O.a)(q,2),V=U[0],F=U[1],G=Object(a.useState)(""),H=Object(O.a)(G,2),z=H[0],J=H[1],B=Object(a.useState)(void 0),K=Object(O.a)(B,2),Q=K[0],Y=K[1],Z=Object(a.useState)(void 0),X=Object(O.a)(Z,2),$=X[0],ee=X[1],te=Object(a.useState)(void 0),ce=Object(O.a)(te,2),ae=ce[0],se=ce[1];function ne(){return(ne=Object(d.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),l(!1),t.prev=2,t.next=5,e._near.contract.register_project({project_name:h,description:w,url:S,owners:V.split(/[ ,]+/)},"200000000000000","1");case 5:window.location.href="#/projectInfo/"+h,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.log("result",t.t0),l(!0);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}function re(){return(re=Object(d.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),console.log(V),console.log(V.split(/[ ,]+/)),console.log(ae),console.log(be),l(!1),t.prev=6,t.next=9,e._near.contract.sign_audit({project_name:be.project_name,version:be.version,report_url:S,summary:W,standards_confirmed:V.split(/[ ,]+/),basic_validity_passed:Q,contract_approved:$,score:parseInt(ae)},"200000000000000","1");case 9:window.location.href="#/contract/"+z,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(6),console.log("result",t.t0),l(!0);case 16:case"end":return t.stop()}}),t,null,[[6,12]])})))).apply(this,arguments)}var ie=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._near.contract.get_user({user_id:c.length<=1?void 0:c[1]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),le=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._near.contract.get_auditor_certificates({user_id:c.length<=1?void 0:c[1]});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),oe=function(){var t=Object(d.a)(o.a.mark((function t(){var c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g,t.next=3,e._near.contract.get_contract({contract_hash:c.length<=1?void 0:c[1]});case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),de=Object(y.a)(["user_id",c],ie,{errorRetryInterval:500}).data,je=Object(y.a)(de&&null!==de.auditor?["user_audits",c]:null,le,{errorRetryInterval:500}).data,be=Object(y.a)(z?["contract",z]:null,oe,{errorRetryInterval:500}).data,he=de&&de.projects_owned.map((function(t,c){return Object(a.createElement)(R,Object(i.a)(Object(i.a)({},e),{},{key:c,data:t}))})),ue=je&&je.length>0?je.map((function(t,c){return Object(a.createElement)(I,Object(i.a)(Object(i.a)({},e),{},{key:c,data:t}))})):Object(v.jsx)("div",{children:"No certificates found"}),me=c===e.signedAccountId;return e.connected?Object(v.jsxs)("div",{className:"pb-3",children:[Object(v.jsxs)("div",{className:"container g-0 px-5",children:[Object(v.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3",children:[Object(v.jsx)("div",{className:"py-2 bd-highlight",children:Object(v.jsx)("h5",{children:"Profile"})}),Object(v.jsx)("div",{className:"p-2 bd-highlight"}),Object(v.jsx)("div",{className:"p-2 bd-highlight",children:Object(v.jsx)("h5",{className:"gray",children:c})}),Object(v.jsx)("div",{className:"ms-auto bd-highlight"}),me?Object(v.jsx)("button",{className:"btn btn-outline-secondary",onClick:function(){return e._near.logOut()},children:"Sign out"}):Object(v.jsx)("div",{})]}),Object(v.jsx)("hr",{})]}),Object(v.jsx)("div",{className:"container g-0 px-5",children:Object(v.jsxs)("div",{className:"d-flex flex-row bd-highlight mb-3",children:[Object(v.jsx)("div",{className:"py-2 bd-highlight",children:t===T?Object(v.jsx)("h5",{className:"nonavigate",children:"Projects"}):Object(v.jsx)("h5",{children:Object(v.jsx)(m.b,{className:"navigate",to:"/profileProjects/".concat(c),children:"Projects"})})}),Object(v.jsx)("div",{className:"p-2 bd-highlight"}),Object(v.jsx)("div",{className:"py-2 bd-highlight",children:t===M?Object(v.jsx)("h5",{className:"nonavigate",children:"Audits"}):Object(v.jsx)("h5",{children:Object(v.jsx)(m.b,{className:"navigate",to:"/profileAudits/".concat(c),children:"Audits"})})}),Object(v.jsx)("div",{className:"p-2 bd-highlight"}),Object(v.jsx)("div",{className:"py-2 bd-highlight",children:t===L?Object(v.jsx)("h5",{className:"nonavigate",children:"Stats"}):Object(v.jsx)("h5",{children:Object(v.jsx)(m.b,{className:"navigate",to:"/profileStats/".concat(c),children:"Stats"})})})]})}),Object(v.jsxs)("div",{className:"container g-0 px-5",children:[t===T&&Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"pb-3",children:he}),Object(v.jsx)("hr",{}),me&&Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("h4",{children:"Create a new project"}),Object(v.jsx)("form",{onSubmit:function(e){return function(e){return ne.apply(this,arguments)}(e)},children:Object(v.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(v.jsxs)("div",{className:"form-group",style:{width:"600px",margin:"25px"},children:[Object(v.jsx)("label",{className:"mt-3",children:"Project name"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: My-awesome-project-3000",onChange:function(e){return u(e.target.value)}}),Object(v.jsx)("label",{className:"mt-3",children:"Project description (max 255 symbols)"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: Developer platform to create apps that put users back in control of their data and assets",onChange:function(e){return _(e.target.value)}}),Object(v.jsx)("label",{className:"mt-3",children:"Project URL"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: github.com/near",onChange:function(e){return A(e.target.value)}}),Object(v.jsx)("label",{className:"mt-3",children:"Owners, comma-separated"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: root.near, alex.near",onChange:function(e){return F(e.target.value)}}),r?Object(v.jsx)("button",{className:"btn btn-outline-primary mt-5",disabled:!h||!w||!S||!V,children:"Create a new project"}):f()]})})})]})]}),t===M&&Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"pb-3",children:de&&!de.auditor?Object(v.jsx)("div",{children:Object(v.jsx)("h5",{children:"Not an auditor. Contact to devs to register as auditor"})}):ue}),me&&de&&de.auditor&&Object(v.jsxs)("div",{className:"mb-3 py-2",children:[Object(v.jsx)("hr",{}),Object(v.jsx)("h4",{children:"Submit an audit"}),Object(v.jsxs)("form",{onSubmit:function(e){return function(e){return re.apply(this,arguments)}(e)},children:[Object(v.jsx)("small",{children:"// 5suuACmAzbTj8oyv4bQUjuJZbRinGMAKMLorDDEFzu4a - quick example"}),Object(v.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(v.jsxs)("div",{className:"form-group",style:{width:"600px",margin:"25px"},children:[Object(v.jsx)("label",{className:"mt-3",children:"Contract hash"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: 55E7imniT2uuYrECn17qJAk9fLcwQW4ftNSwmCJL5Di",onChange:function(e){return J(e.target.value)}}),Object(v.jsx)("div",{className:"mt-3"}),Object(v.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[be?Object(v.jsx)("small",{className:"me-auto",children:"Found"}):Object(v.jsx)("small",{className:"me-auto",children:"Nothing found"}),be&&Object(v.jsxs)("small",{className:"gray me-3",children:["Project: ",be.project_name]}),be&&Object(v.jsxs)("small",{className:"gray",children:["Version: ",be.version]})]}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{className:"mt-3"}),Object(v.jsx)("label",{children:"Report URL"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: github.com/near",onChange:function(e){return A(e.target.value)}}),Object(v.jsx)("div",{className:"mt-3"}),Object(v.jsx)("label",{children:"Summary, 255 symbols max"}),Object(v.jsx)("textarea",{rows:"4",className:"form-control mt-2",placeholder:"Example: Fifteen critical and eight high severity issues were found, along with recommendations on how to fix them. Additionally, some medium and lower severity issues were found and explained. Some changes were proposed to follow best practices and reduce the potential attack surface.",onChange:function(e){return D(e.target.value)}}),Object(v.jsx)("div",{className:"mt-3"}),Object(v.jsx)("label",{children:"Standards, comma-separated, optional"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: FOO-16, BAR-141",onChange:function(e){return F(e.target.value)}}),Object(v.jsx)("small",{className:"gray",children:"Leave blank if no standards are confirmed"}),Object(v.jsx)("div",{className:"mt-3"}),Object(v.jsx)("label",{children:"Basic contract validity verdict"}),Object(v.jsx)("div",{className:"mt-1"}),Object(v.jsxs)("div",{className:"form-check",children:[Object(v.jsx)("input",{className:"form-check-input",type:"radio",name:"flexRadioDefault1",onChange:function(e){return Y(!0)}}),Object(v.jsxs)("label",{className:"form-check-label small",children:["I confirm the source code of the contract has been downloaded from the Blockchain and it has been compiled into ",Object(v.jsx)("samp",{className:"small",children:z})]})]}),Object(v.jsxs)("div",{className:"form-check",children:[Object(v.jsx)("input",{className:"form-check-input",type:"radio",name:"flexRadioDefault1",onChange:function(e){return Y(!1)}}),Object(v.jsx)("label",{className:"form-check-label small",children:"The condition above is false"})]}),Object(v.jsxs)("small",{className:"gray",children:["This mark corresponds to basic contract validity knowledge at ",Object(v.jsx)("u",{children:"contracts.one"}),". If you have audited NOT an open source code, please mark the condition above as false and go to the next question."]}),Object(v.jsx)("div",{className:"mt-3"}),Object(v.jsx)("label",{children:"General contract audit verdict"}),Object(v.jsx)("div",{className:"mt-1"}),Object(v.jsxs)("div",{className:"form-check",children:[Object(v.jsx)("input",{className:"form-check-input",type:"radio",name:"flexRadioDefault2",onChange:function(e){return ee(!0)}}),Object(v.jsx)("label",{className:"form-check-label small",children:"I confirm the source code of the contract is considered safe and can be used by anyone in any way without risks of potential funding losses"})]}),Object(v.jsxs)("div",{className:"form-check",children:[Object(v.jsx)("input",{className:"form-check-input",type:"radio",name:"flexRadioDefault2",onChange:function(e){return ee(!1)}}),Object(v.jsx)("label",{className:"form-check-label small",children:"The condition above is false"})]}),Object(v.jsx)("small",{className:"gray",children:"If the contract has dangerous flaws, please mark the condition above as false. Then the contract must be updated by the developer and uploaded under a new version. Please make sure that your report is reachable by URL and explains clearly the flaws."}),Object(v.jsx)("div",{className:"mt-3"}),Object(v.jsx)("label",{children:"Overall contract quality rating, integer in range [1..10]"}),Object(v.jsx)("input",{type:"text",className:"form-control mt-2",placeholder:"Example: 7",onChange:function(e){return se(e.target.value)}}),Object(v.jsx)("small",{className:"gray",children:"Even in case of having dangerous flaws, the overall code quality may be very good. This score is mostly about your subjective understanding of how good the code is organized and structured, how easy to get into details, etc."}),Object(v.jsx)("div",{className:"mt-3"}),r?Object(v.jsx)("button",{className:"btn btn-outline-primary",disabled:!be||!S||void 0===Q||void 0===$||!ae,children:"Submit an audit"}):f()]})})]})]})]})]})]}):f()}function U(e){return q(e,L)}function V(e){return q(e,T)}function F(e){return q(e,M)}var G=c.p+"static/media/logo.0b3cf20a.png",H=c.p+"static/media/profile.abe53919.png",z={accountSuffix:"testnet",networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:"dev-1618917933127-5935675",walletUrl:"https://wallet.testnet.near.org"},J=function(e){Object(h.a)(c,e);var t=Object(u.a)(c);function c(e){var a;return Object(j.a)(this,c),(a=t.call(this,e))._near={},a._near.lsKey=z.contractName+":v01:",a._near.config=z,a.state={connected:!1,account:null},a._initNear().then((function(){a.setState({signedIn:!!a._near.accountId,signedAccountId:a._near.accountId,connected:!0})})),a}return Object(b.a)(c,[{key:"_initNear",value:function(){var e=Object(d.a)(o.a.mark((function e(){var t,c,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new p.keyStores.BrowserLocalStorageKeyStore,e.next=3,p.connect(Object.assign({deps:{keyStore:t}},z));case 3:c=e.sent,this._near.keyStore=t,this._near.near=c,this._near.walletConnection=new p.WalletConnection(c,z.contractName),this._near.accountId=this._near.walletConnection.getAccountId(),this._near.account=this._near.walletConnection.account(),this._near.contract=new p.Contract(this._near.account,z.contractName,{viewMethods:["get_project","get_contract","get_contract_safety_report","get_certificate","get_all_projects","get_project_last_version","get_contract_source_code","get_user","get_auditor_certificates","get_all_certificates"],changeMethods:["create_user","register_project","register_contract","register_auditor","sign_audit","submit_audit_feedback"]}),this._near.logOut=function(){a._near.walletConnection.signOut(),a._near.accountId=null,a.setState({signedIn:!!a._accountId,signedAccountId:a._accountId})},this._near.refreshAllowance=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("You're out of access key allowance. Need sign in again to refresh it"),e.next=3,a.logOut();case 3:return e.next=5,a.requestSignIn();case 5:case"end":return e.stop()}}),e)})));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestSignIn",value:function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),"Contracts One",e.next=4,this._near.walletConnection.requestSignIn(z.contractName,"Contracts One");case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(i.a)({_near:this._near,refreshAllowance:function(){return e._near.refreshAllowance()}},this.state),c=this.state.connected?this.state.signedIn?Object(v.jsx)("div",{children:Object(v.jsxs)(m.b,{className:"navbar-brand",to:"/profileProjects/".concat(this.state.signedAccountId),children:[this.state.signedAccountId,Object(v.jsx)("img",{src:H,alt:"Profile",className:"px-2 d-inline-block align-middle",style:{opacity:.85}})]})}):Object(v.jsx)("div",{children:Object(v.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.requestSignIn(t)},children:"Sign in with NEAR Wallet"})}):Object(v.jsxs)("div",{children:["Connecting... ",Object(v.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"})]});return Object(v.jsx)("div",{className:"App text-white",style:{backgroundColor:"#000000"},children:Object(v.jsxs)(m.a,{basename:"",children:[Object(v.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark mb-3",style:{backgroundColor:"#2F2F2F"},children:Object(v.jsxs)("div",{className:"container-fluid",children:[Object(v.jsx)("div",{style:{marginLeft:"3%"}}),Object(v.jsx)(m.b,{className:"navbar-brand",to:"/",title:"contracts.one",children:Object(v.jsx)("img",{src:G,alt:"[BETA] Contracts One",className:"d-inline-block align-middle",style:{opacity:1}})}),Object(v.jsx)("div",{style:{marginLeft:"1%"}}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(v.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(m.b,{className:"nav-link","aria-current":"page",to:"/",children:"Search"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(m.b,{className:"nav-link","aria-current":"page",to:"/projects",children:"Projects"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(m.b,{className:"nav-link","aria-current":"page",to:"/certificates",children:"Certificates"})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(m.b,{className:"nav-link","aria-current":"page",to:"/issues",children:"Issues (in progress)"})})]}),Object(v.jsx)("form",{className:"d-flex",children:c}),Object(v.jsx)("div",{style:{marginRight:"3%"}})]})]})}),Object(v.jsxs)(x.c,{children:[Object(v.jsx)(x.a,{exact:!0,path:"/",children:Object(v.jsx)(w,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/projects",children:Object(v.jsx)(W,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/projects/:page",children:Object(v.jsx)(W,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/certificates",children:Object(v.jsx)(S,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/certificates/:page",children:Object(v.jsx)(S,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/projectInfo/:projectName",children:Object(v.jsx)(D,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/contract/:contractHash",children:Object(v.jsx)(E,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/profileStats/:profileId",children:Object(v.jsx)(U,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/profileProjects/:profileId",children:Object(v.jsx)(V,Object(i.a)({},t))}),Object(v.jsx)(x.a,{exact:!0,path:"/profileAudits/:profileId",children:Object(v.jsx)(F,Object(i.a)({},t))})]})]})})}}]),c}(s.a.Component);r.a.render(Object(v.jsx)(J,{}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.4954d9b3.chunk.js.map